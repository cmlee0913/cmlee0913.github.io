---
title: "컴퓨터 시스템 동작"
date: 2020-12-17 23:15:39 -0400
categories: OS
---
  
1. 컴퓨터 시스템의 동작 과정  
  
컴퓨터 시스템은 메모리에 있는 프로그램(명령어 목록)에 따라 처리하는 일종의 전자 계산기.  
입력장치 -> 메모리 -> 프로그램 제어에 따라 인출 -> 산술 장치, 논술 장치 -> 출력 장치, 보조기억장치  
  
어느 작업 하나를 수행하기 위한 명령어 집합을 **프로그램** 이라고 한다.  
  
1. 명령어 구성  
  
명령어는 프로세서가 실행할 연산을 나타내는 **연산 코드**와 명령어가 처리할 데이터나 데이터가 저장된 주소에 관한 정보(레지스터, 메모리)를 기술하는 **오퍼랜드**로 이루어진다.  
  
명령어는 실행 전에 메인 메모리에 저장 되고 프로세서로 하나씩 옮겨져 해석 실행된다. 데이터는 메모리에 순차적으로 저장되고 프로세서는 PC를 이용하여 저장된 명령어를 순차적으로 실행.  
오퍼랜드의 내용이 담긴 메모리 번지를 가리키면 직접 주소. 장소를 가리키면 간접 주소라고 한다.  
  
1. 명령어 실행  
  
메모리에서 명령어 레지스터로 이동하여 저장된 다음 **명령어 인출** ->  
인출된 **명령어 해석** 후 다음 명령어 지정하려고 PC 변경 ->  
명령어가 메모리에 있는 워드를 사용하려면 사용 장소를 결정 후 **오퍼랜드를 인출**하고 필요하면 프로세서 레지스터로 보냄 ->  
**명령어 실행** ->  
명령어 실행 **결과 저장** ->  
**다음 명령어**  
  
명령어 실행은 프로세서의 제어장치가 수행. 프로세서는 메모리에서 명령어를 하나씩 인출해서 해석연산. 위의 사이클을 **명령어 실행 사이클** 이라고 한다.  
간략히 표기 시, **인출 -> 간접 -> 실행 -> (인터럽트)** 의 과정을 거친다.  
  
- 인출 사이클  
  
인출 사이클은 명령어 실행 사이클의 첫 단계이다. 총 3단계로 이루어지며  
T1 : PC의 현재 내용을 MAR로 전송 후 주소 버스로 메모리에 전달.  
T2 : 메모리에서 MBR로 데이터 버스를 통해 전송.  
     PC의 값에 + 1.  
T3 : MBR에서 명령어 레지스터(IR)로 이동시킨다.  
  
- 간접 사이클  
  
간접 사이클은 인출과 실행 사이에 존재.  
T1 : IR에서 MAR로 전달되어 메모리에서 오퍼랜드 주소 인출.  
T2 : 메모리(오퍼랜드) 주소로 부터 데이터를 MBR로 읽어옴.  
T3 : MBR의 주소 데이터를 IR로 주소 형태로 전달.  
  
- 실행 사이클  
  
실행 사이클에서는 IR의 명령어를 해석하고 필요한 신호를 발생시켜 실제로 명령어를 처리한다. 이 단계에서 소비되는 시간을 실행 시간이라고 한다.  
  
- 인터럽트 사이클  
  
프로세스는 실행 사이클 후 종료되지만 프로세스가 프로세서의 정상적인 순차 제어에서 벗어나면 인터럽트 사이클이 발생한다.  
  
T1 : PC의 현재 내용을 MBR로 전송.  
T2 : PC에 저장된 주소를 MAR로 이동. 인터럽트 루틴 주소를 PC로 이동.  
T3 : MBR의 주소에 있는 내용을 지시된 메모리 셀로 이동.  
  
1. 인터럽트  
  
인터럽트는 컴퓨터에 설정된 장치(입출력장치, 컴퓨터의 프로그램)에서 프로세서로 보내는 하드웨어 신호. 인터럽트를 받은 프로그램은 실행을 멈추고 다른 프로그램이 실행된다.  
단일 프로세서 컴퓨터는 명령어를 한 번에 하나 밖에 수행하지 못하지만, 인터럽트를 이용하면 다른 프로그램이나 명령어 수행 가능. 즉, **다중 프로그래밍** 가능.  
시스템이 예측하지 못한 긴급 상황을 위해서 인터럽트가 꼭 필요.  
  
인터럽트는 현재 실행 중인 프로그램의 수행을 미루고 다른 프로그램의 수행을 요구하는 명령이다. 사용자 프로그램 관점에서 인터럽트는 프로그램의 정상 실행을 일시 정지시키는  
과정과 다시 재개하는 과정으로 연속된다.  
  
컴퓨터는 외부 장치의 동작과 자신의 동작을 조정 할 수 있는 수단으로 인터럽트를 사용한다. 인터럽트가 발생할 때 수생하는 일을 **인터럽트 서비스 루틴**이라고 한다.  
  
- 인터럽트 과정  
T1 : 기존의 작업을 처리하던 도중, 인터럽트가 발생하면  
T2 : 현재 컴퓨터가 처리하는 일을 중지하고 현재의 컴퓨터의 상태(CPU 내부의 레지스터, 메인 메모리 내용 등을) 스택 영역(PCB)에 저장한다.  
T3 : 해당하는 인터럽트를 처리해주기 위한 인터럽트 서비스 루틴을 처리한다.  
T4 : 인터럽트 처리 이후 저장되었던 이전 작업의 상태를 복구하고 이전 작업 수행을 재개한다.  
  
프로그램 실행 -> 인터럽트 발생 시 현재 레지스터 내용 스택 영역에 저장 -> 인터럽트 서비스 루틴 -> 종료 후 스택 영역에서 다시 레지스터로 내용 보냄 -> 중단되었던 부분 주소 호출  



